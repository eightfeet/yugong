(this.webpackJsonpyugong=this.webpackJsonpyugong||[]).push([[97],{1708:function(e,t,a){"use strict";a.d(t,"a",(function(){return J}));var o=a(8),n=a(1),r=a(79),i=a(73),l=a(751),s=a(37),d=a(303),u=a(40);function c(e,t){var a=e.isExpand?e.children:[],o=e.parentNode.children,n=e.hierNode.i?o[e.hierNode.i-1]:null;if(a.length){!function(e){var t=e.children,a=t.length,o=0,n=0;for(;--a>=0;){var r=t[a];r.hierNode.prelim+=o,r.hierNode.modifier+=o,n+=r.hierNode.change,o+=r.hierNode.shift+n}}(e);var r=(a[0].hierNode.prelim+a[a.length-1].hierNode.prelim)/2;n?(e.hierNode.prelim=n.hierNode.prelim+t(e,n),e.hierNode.modifier=e.hierNode.prelim-r):e.hierNode.prelim=r}else n&&(e.hierNode.prelim=n.hierNode.prelim+t(e,n));e.parentNode.hierNode.defaultAncestor=function(e,t,a,o){if(t){for(var n=e,r=e,i=r.parentNode.children[0],l=t,s=n.hierNode.modifier,d=r.hierNode.modifier,u=i.hierNode.modifier,c=l.hierNode.modifier;l=y(l),r=f(r),l&&r;){n=y(n),i=f(i),n.hierNode.ancestor=e;var h=l.hierNode.prelim+c-r.hierNode.prelim-d+o(l,r);h>0&&(m(v(l,e,a),e,h),d+=h,s+=h),c+=l.hierNode.modifier,d+=r.hierNode.modifier,s+=n.hierNode.modifier,u+=i.hierNode.modifier}l&&!y(n)&&(n.hierNode.thread=l,n.hierNode.modifier+=c-s),r&&!f(i)&&(i.hierNode.thread=r,i.hierNode.modifier+=d-u,a=e)}return a}(e,n,e.parentNode.hierNode.defaultAncestor||o[0],t)}function h(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function p(e){return arguments.length?e:b}function g(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function y(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function f(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function v(e,t,a){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:a}function m(e,t,a){var o=a/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=o,t.hierNode.shift+=a,t.hierNode.modifier+=a,t.hierNode.prelim+=a,e.hierNode.change+=o}function b(e,t){return e.parentNode===t.parentNode?1:2}var x=a(187),w=a(281),I=a(314),L=a(275),_=a(332),M=a(9),N=a(61),O=a(45),S=a(13),j=function(){this.parentPoint=[],this.childPoints=[]},D=function(e){function t(t){return e.call(this,t)||this}return Object(o.b)(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new j},t.prototype.buildPath=function(e,t){var a=t.childPoints,o=a.length,n=t.parentPoint,r=a[0],i=a[o-1];if(1===o)return e.moveTo(n[0],n[1]),void e.lineTo(r[0],r[1]);var l=t.orient,s="TB"===l||"BT"===l?0:1,d=1-s,u=Object(M.p)(t.forkPosition,1),c=[];c[s]=n[s],c[d]=n[d]+(i[d]-n[d])*u,e.moveTo(n[0],n[1]),e.lineTo(c[0],c[1]),e.moveTo(r[0],r[1]),c[s]=r[s],e.lineTo(c[0],c[1]),c[s]=i[s],e.lineTo(c[0],c[1]),e.lineTo(i[0],i[1]);for(var h=1;h<o-1;h++){var p=a[h];e.moveTo(p[0],p[1]),c[s]=p[s],e.lineTo(c[0],c[1])}},t}(O.b),T=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a._mainGroup=new r.a,a}return Object(o.b)(t,e),t.prototype.init=function(e,t){this._controller=new L.a(t.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(e,t,a){var o=e.getData(),n=e.layoutInfo,r=this._mainGroup;"radial"===e.get("layout")?(r.x=n.x+n.width/2,r.y=n.y+n.height/2):(r.x=n.x,r.y=n.y),this._updateViewCoordSys(e),this._updateController(e,t,a);var i=this._data;o.diff(i).add((function(t){A(o,t)&&V(o,t,null,r,e)})).update((function(t,a){var n=i.getItemGraphicEl(a);A(o,t)?V(o,t,n,r,e):n&&P(i,a,n,r,e)})).remove((function(t){var a=i.getItemGraphicEl(t);a&&P(i,t,a,r,e)})).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),!0===e.get("expandAndCollapse")&&o.eachItemGraphicEl((function(t,o){t.off("click").on("click",(function(){a.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:o})}))})),this._data=o},t.prototype._updateViewCoordSys=function(e){var t=e.getData(),a=[];t.each((function(e){var o=t.getItemLayout(e);!o||isNaN(o.x)||isNaN(o.y)||a.push([+o.x,+o.y])}));var o=[],n=[];x.d(a,o,n);var r=this._min,i=this._max;n[0]-o[0]===0&&(o[0]=r?r[0]:o[0]-1,n[0]=i?i[0]:n[0]+1),n[1]-o[1]===0&&(o[1]=r?r[1]:o[1]-1,n[1]=i?i[1]:n[1]+1);var l=e.coordinateSystem=new w.a;l.zoomLimit=e.get("scaleLimit"),l.setBoundingRect(o[0],o[1],n[0]-o[0],n[1]-o[1]),l.setCenter(e.get("center")),l.setZoom(e.get("zoom")),this.group.attr({x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY}),this._min=o,this._max=n},t.prototype._updateController=function(e,t,a){var o=this,n=this._controller,r=this._controllerHost,i=this.group;n.setPointerChecker((function(t,o,n){var r=i.getBoundingRect();return r.applyTransform(i.transform),r.contain(o,n)&&!Object(_.a)(t,a,e)})),n.enable(e.get("roam")),r.zoomLimit=e.get("scaleLimit"),r.zoom=e.coordinateSystem.getZoom(),n.off("pan").off("zoom").on("pan",(function(t){I.a(r,t.dx,t.dy),a.dispatchAction({seriesId:e.id,type:"treeRoam",dx:t.dx,dy:t.dy})})).on("zoom",(function(t){I.b(r,t.scale,t.originX,t.originY),a.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),o._updateNodeAndLinkScale(e),a.updateLabelLayout()}))},t.prototype._updateNodeAndLinkScale=function(e){var t=e.getData(),a=this._getNodeGlobalScale(e);t.eachItemGraphicEl((function(e,t){e.setSymbolScale(a)}))},t.prototype._getNodeGlobalScale=function(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var a=this._nodeScaleRatio,o=t.scaleX||1;return((t.getZoom()-1)*a+1)/o},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(N.a);function A(e,t){var a=e.getItemLayout(t);return a&&!isNaN(a.x)&&!isNaN(a.y)}function V(e,t,a,o,r){var u=!a,c=e.tree.getNodeByDataIndex(t),h=c.getModel(),p=c.getVisual("style").fill,g=!1===c.isExpand&&0!==c.children.length?p:"#fff",y=e.tree.root,f=c.parentNode===y?c:c.parentNode||c,v=e.getItemGraphicEl(f.dataIndex),m=f.getLayout(),b=v?{x:v.__oldX,y:v.__oldY,rawX:v.__radialOldRawX,rawY:v.__radialOldRawY}:m,x=c.getLayout();u?((a=new d.a(e,t,null,{symbolInnerColor:g,useNameLabel:!0})).x=b.x,a.y=b.y):a.updateData(e,t,null,{symbolInnerColor:g,useNameLabel:!0}),a.__radialOldRawX=a.__radialRawX,a.__radialOldRawY=a.__radialRawY,a.__radialRawX=x.rawX,a.__radialRawY=x.rawY,o.add(a),e.setItemGraphicEl(t,a),a.__oldX=a.x,a.__oldY=a.y,i.h(a,{x:x.x,y:x.y},r);var w=a.getSymbolPath();if("radial"===r.get("layout")){var I=y.children[0],L=I.getLayout(),_=I.children.length,M=void 0,N=void 0;if(x.x===L.x&&!0===c.isExpand){var O={x:(I.children[0].getLayout().x+I.children[_-1].getLayout().x)/2,y:(I.children[0].getLayout().y+I.children[_-1].getLayout().y)/2};(M=Math.atan2(O.y-L.y,O.x-L.x))<0&&(M=2*Math.PI+M),(N=O.x<L.x)&&(M-=Math.PI)}else(M=Math.atan2(x.y-L.y,x.x-L.x))<0&&(M=2*Math.PI+M),0===c.children.length||0!==c.children.length&&!1===c.isExpand?(N=x.x<L.x)&&(M-=Math.PI):(N=x.x>L.x)||(M-=Math.PI);var j=N?"left":"right",T=h.getModel("label"),A=T.get("rotate"),V=A*(Math.PI/180),R=w.getTextContent();R&&(w.setTextConfig({position:T.get("position")||j,rotation:null==A?-M:V,origin:"center"}),R.setStyle("verticalAlign","middle"))}var C=h.get(["emphasis","focus"]),P="ancestor"===C?c.getAncestorsIndices():"descendant"===C?c.getDescendantIndices():null;P&&(Object(s.a)(a).focus=P),function(e,t,a,o,r,s,d,u){var c=t.getModel(),h=e.get("edgeShape"),p=e.get("layout"),g=e.getOrient(),y=e.get(["lineStyle","curveness"]),f=e.get("edgeForkPosition"),v=c.getModel("lineStyle").getLineStyle(),m=o.__edge;if("curve"===h)t.parentNode&&t.parentNode!==a&&(m||(m=o.__edge=new l.a({shape:E(p,g,y,r,r)})),i.h(m,{shape:E(p,g,y,s,d)},e));else if("polyline"===h)if("orthogonal"===p){if(t!==a&&t.children&&0!==t.children.length&&!0===t.isExpand){for(var b=t.children,x=[],w=0;w<b.length;w++){var I=b[w].getLayout();x.push([I.x,I.y])}m||(m=o.__edge=new D({shape:{parentPoint:[d.x,d.y],childPoints:[[d.x,d.y]],orient:g,forkPosition:f}})),i.h(m,{shape:{parentPoint:[d.x,d.y],childPoints:x}},e)}}else 0;m&&(m.useStyle(n.defaults({strokeNoScale:!0,fill:null},v)),Object(S.I)(m,c,"lineStyle"),Object(S.G)(m),u.add(m))}(r,c,y,a,b,m,x,o),a.__edge&&(a.onHoverStateChange=function(t){if("blur"!==t){var o=c.parentNode&&e.getItemGraphicEl(c.parentNode.dataIndex);o&&o.hoverState===S.d||Object(S.H)(a.__edge,t)}})}function R(e,t,a,o,n){var r=C(t.tree.root,e),l=r.source,s=r.sourceLayout,d=t.getItemGraphicEl(e.dataIndex);if(d){var u=t.getItemGraphicEl(l.dataIndex).__edge,c=d.__edge||(!1===l.isExpand||1===l.children.length?u:void 0),h=o.get("edgeShape"),p=o.get("layout"),g=o.get("orient"),y=o.get(["lineStyle","curveness"]);c&&("curve"===h?i.e(c,{shape:E(p,g,y,s,s),style:{opacity:0}},o,{cb:function(){a.remove(c)},removeOpt:n}):"polyline"===h&&"orthogonal"===o.get("layout")&&i.e(c,{shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]]},style:{opacity:0}},o,{cb:function(){a.remove(c)},removeOpt:n}))}}function C(e,t){for(var a,o=t.parentNode===e?t:t.parentNode||t;null==(a=o.getLayout());)o=o.parentNode===e?o:o.parentNode||o;return{source:o,sourceLayout:a}}function P(e,t,a,o,n){var r=e.tree.getNodeByDataIndex(t),l=C(e.tree.root,r).sourceLayout,s={duration:n.get("animationDurationUpdate"),easing:n.get("animationEasingUpdate")};i.e(a,{x:l.x+1,y:l.y+1},n,{cb:function(){o.remove(a),e.setItemGraphicEl(t,null)},removeOpt:s}),a.fadeOut(null,{fadeLabel:!0,animation:s}),r.children.forEach((function(t){R(t,e,o,n,s)})),R(r,e,o,n,s)}function E(e,t,a,o,n){var r,i,l,s,d,u,c,h;if("radial"===e){d=o.rawX,c=o.rawY,u=n.rawX,h=n.rawY;var p=g(d,c),y=g(d,c+(h-c)*a),f=g(u,h+(c-h)*a),v=g(u,h);return{x1:p.x||0,y1:p.y||0,x2:v.x||0,y2:v.y||0,cpx1:y.x||0,cpy1:y.y||0,cpx2:f.x||0,cpy2:f.y||0}}return d=o.x,c=o.y,u=n.x,h=n.y,"LR"!==t&&"RL"!==t||(r=d+(u-d)*a,i=c,l=u+(d-u)*a,s=h),"TB"!==t&&"BT"!==t||(r=d,i=c+(h-c)*a,l=u,s=h+(c-h)*a),{x1:d,y1:c,x2:u,y2:h,cpx1:r,cpy1:i,cpx2:l,cpy2:s}}var k=T,G=a(62),z=a(409),B=a(66),W=a(76),X=a(140),H=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasSymbolVisual=!0,t.ignoreStyleOnData=!0,t}return Object(o.b)(t,e),t.prototype.getInitialData=function(e){var t={name:e.name,children:e.data},a=e.leaves||{},o=new B.a(a,this,this.ecModel),n=z.a.createTree(t,this,(function(e){e.wrapMethod("getItemModel",(function(e,t){var a=n.getNodeByDataIndex(t);return a&&a.children.length&&a.isExpand||(e.parentModel=o),e}))}));var r=0;n.eachNode("preorder",(function(e){e.depth>r&&(r=e.depth)}));var i=e.expandAndCollapse&&e.initialTreeDepth>=0?e.initialTreeDepth:r;return n.root.eachNode("preorder",(function(e){var t=e.hostTree.data.getRawDataItem(e.dataIndex);e.isExpand=t&&null!=t.collapsed?!t.collapsed:e.depth<=i})),n.data},t.prototype.getOrient=function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.formatTooltip=function(e,t,a){for(var o=this.getData().tree,n=o.root.children[0],r=o.getNodeByDataIndex(e),i=r.getValue(),l=r.name;r&&r!==n;)l=r.parentNode.name+"."+l,r=r.parentNode;return Object(W.c)("nameValue",{name:l,value:i,noValue:isNaN(i)||null==i})},t.prototype.getDataParams=function(t){var a=e.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(t);return a.treeAncestors=Object(X.d)(o,this),a},t.type="series.tree",t.layoutMode="box",t.defaultOption={zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(G.b),Y=H;function F(e,t){for(var a,o=[e];a=o.pop();)if(t(a),a.isExpand){var n=a.children;if(n.length)for(var r=n.length-1;r>=0;r--)o.push(n[r])}}function Z(e,t){e.eachSeriesByType("tree",(function(e){!function(e,t){var a=function(e,t){return u.g(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t);e.layoutInfo=a;var o=e.get("layout"),n=0,r=0,i=null;"radial"===o?(n=2*Math.PI,r=Math.min(a.height,a.width)/2,i=p((function(e,t){return(e.parentNode===t.parentNode?1:2)/e.depth}))):(n=a.width,r=a.height,i=p());var l=e.getData().tree.root,s=l.children[0];if(s){!function(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var a,o,n=[t];a=n.pop();)if(o=a.children,a.isExpand&&o.length)for(var r=o.length-1;r>=0;r--){var i=o[r];i.hierNode={defaultAncestor:null,ancestor:i,prelim:0,modifier:0,change:0,shift:0,i:r,thread:null},n.push(i)}}(l),function(e,t,a){for(var o,n=[e],r=[];o=n.pop();)if(r.push(o),o.isExpand){var i=o.children;if(i.length)for(var l=0;l<i.length;l++)n.push(i[l])}for(;o=r.pop();)t(o,a)}(s,c,i),l.hierNode.modifier=-s.hierNode.prelim,F(s,h);var d=s,y=s,f=s;F(s,(function(e){var t=e.getLayout().x;t<d.getLayout().x&&(d=e),t>y.getLayout().x&&(y=e),e.depth>f.depth&&(f=e)}));var v=d===y?1:i(d,y)/2,m=v-d.getLayout().x,b=0,x=0,w=0,I=0;if("radial"===o)b=n/(y.getLayout().x+v+m),x=r/(f.depth-1||1),F(s,(function(e){w=(e.getLayout().x+m)*b,I=(e.depth-1)*x;var t=g(w,I);e.setLayout({x:t.x,y:t.y,rawX:w,rawY:I},!0)}));else{var L=e.getOrient();"RL"===L||"LR"===L?(x=r/(y.getLayout().x+v+m),b=n/(f.depth-1||1),F(s,(function(e){I=(e.getLayout().x+m)*x,w="LR"===L?(e.depth-1)*b:n-(e.depth-1)*b,e.setLayout({x:w,y:I},!0)}))):"TB"!==L&&"BT"!==L||(b=n/(y.getLayout().x+v+m),x=r/(f.depth-1||1),F(s,(function(e){w=(e.getLayout().x+m)*b,I="TB"===L?(e.depth-1)*x:r-(e.depth-1)*x,e.setLayout({x:w,y:I},!0)})))}}}(e,t)}))}function U(e){e.eachSeriesByType("tree",(function(e){var t=e.getData();t.tree.eachNode((function(e){var a=e.getModel().getModel("itemStyle").getItemStyle(),o=t.ensureUniqueItemVisual(e.dataIndex,"style");Object(n.extend)(o,a)}))}))}var q=a(408);function J(e){e.registerChartView(k),e.registerSeriesModel(Y),e.registerLayout(Z),e.registerVisual(U),function(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},(function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},(function(t){var a=e.dataIndex,o=t.getData().tree.getNodeByDataIndex(a);o.isExpand=!o.isExpand}))})),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},(function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},(function(t){var a=t.coordinateSystem,o=Object(q.a)(a,e);t.setCenter&&t.setCenter(o.center),t.setZoom&&t.setZoom(o.zoom)}))}))}(e)}},1711:function(e,t,a){"use strict";a.d(t,"a",(function(){return me}));var o=a(140),n=function(){},r=["treemapZoomToNode","treemapRender","treemapMove"];var i=a(8),l=a(1),s=a(62),d=a(409),u=a(66),c=a(11),h=a(76),p=a(633),g=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a.preventUsingHoverLayer=!0,a}return Object(i.b)(t,e),t.prototype.getInitialData=function(e,t){var a={name:e.name,children:e.data};y(a);var o=e.levels||[],n=this.designatedVisualItemStyle={},r=new u.a({itemStyle:n},this,t);o=e.levels=function(e,t){var a,o,n=Object(c.r)(t.get("color")),r=Object(c.r)(t.get(["aria","decal","decals"]));if(!n)return;e=e||[],l.each(e,(function(e){var t=new u.a(e),n=t.get("color"),r=t.get("decal");(t.get(["itemStyle","color"])||n&&"none"!==n)&&(a=!0),(t.get(["itemStyle","decal"])||r&&"none"!==r)&&(o=!0)}));var i=e[0]||(e[0]={});a||(i.color=n.slice());!o&&r&&(i.decal=r.slice());return e}(o,t);var i=l.map(o||[],(function(e){return new u.a(e,r,t)}),this),s=d.a.createTree(a,this,(function(e){e.wrapMethod("getItemModel",(function(e,t){var a=s.getNodeByDataIndex(t),o=a?i[a.depth]:null;return e.parentModel=o||r,e}))}));return s.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(e,t,a){var o=this.getData(),n=this.getRawValue(e),r=o.getName(e);return Object(h.c)("nameValue",{name:r,value:n})},t.prototype.getDataParams=function(t){var a=e.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return a.treeAncestors=Object(o.d)(n,this),a.treePathInfo=a.treeAncestors,a},t.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},l.extend(this.layoutInfo,e)},t.prototype.mapIdToIndex=function(e){var t=this._idIndexMap;t||(t=this._idIndexMap=l.createHashMap(),this._idIndexMapCount=0);var a=t.get(e);return null==a&&t.set(e,a=this._idIndexMapCount++),a},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)},t.prototype.enableAriaDecal=function(){Object(p.a)(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25b6",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(s.b);function y(e){var t=0;l.each(e.children,(function(e){y(e);var a=e.value;l.isArray(a)&&(a=a[0]),t+=a}));var a=e.value;l.isArray(a)&&(a=a[0]),(null==a||isNaN(a))&&(a=t),a<0&&(a=0),l.isArray(e.value)?e.value[0]=a:e.value=a}var f=g,v=a(79),m=a(119),b=a(37),x=a(13),w=a(163),I=a(280),L=a(130),_=a(40);function M(e,t,a,o,n,r){var i=[[n?e:e-5,t],[e+a,t],[e+a,t+o],[n?e:e-5,t+o]];return!r&&i.splice(2,0,[e+a+5,t+o/2]),!n&&i.push([e,t+o/2]),i}function N(e,t,a){Object(b.a)(e).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:a&&a.dataIndex,name:a&&a.name},treePathInfo:a&&Object(o.d)(a,t)}}var O=function(){function e(e){this.group=new v.a,e.add(this.group)}return e.prototype.render=function(e,t,a,o){var n=e.getModel("breadcrumb"),r=this.group;if(r.removeAll(),n.get("show")&&a){var i=n.getModel("itemStyle"),l=i.getModel("textStyle"),s={pos:{left:n.get("left"),right:n.get("right"),top:n.get("top"),bottom:n.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:n.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(a,s,l),this._renderContent(e,s,i,l,o),_.i(r,s.pos,s.box)}},e.prototype._prepare=function(e,t,a){for(var o=e;o;o=o.parentNode){var n=Object(c.e)(o.getModel().get("name"),""),r=a.getTextRect(n),i=Math.max(r.width+16,t.emptyItemWidth);t.totalWidth+=i+8,t.renderList.push({node:o,text:n,width:i})}},e.prototype._renderContent=function(e,t,a,o,n){for(var r=0,i=t.emptyItemWidth,s=e.get(["breadcrumb","height"]),d=_.e(t.pos,t.box),u=t.totalWidth,c=t.renderList,h=c.length-1;h>=0;h--){var p=c[h],g=p.node,y=p.width,f=p.text;u>d.width&&(u-=y-i,y=i,f=null);var v=new I.a({shape:{points:M(r,0,y,s,h===c.length-1,0===h)},style:Object(l.defaults)(a.getItemStyle(),{lineJoin:"bevel"}),textContent:new L.a({style:{text:f,fill:o.getTextColor(),font:o.getFont()}}),textConfig:{position:"inside"},z2:1e4*x.j,onclick:Object(l.curry)(n,g)});v.disableLabelAnimation=!0,this.group.add(v),N(v,e,g),r+=y+8}},e.prototype.remove=function(){this.group.removeAll()},e}(),S=a(275),j=a(42),D=a(46),T=a(968),A=a(209),V=a(61),R=a(105),C=a(58),P=a(33),E=v.a,k=m.a,G="label",z="upperLabel",B=10*x.j,W=2*x.j,X=3*x.j,H=Object(A.a)([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Y=function(e){var t=H(e);return t.stroke=t.fill=t.lineWidth=null,t},F=Object(c.o)(),Z=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a._state="ready",a._storage={nodeGroup:[],background:[],content:[]},a}return Object(i.b)(t,e),t.prototype.render=function(e,t,a,n){var r=t.findComponents({mainType:"series",subType:"treemap",query:n});if(!(Object(l.indexOf)(r,e)<0)){this.seriesModel=e,this.api=a,this.ecModel=t;var i=o.c(n,["treemapZoomToNode","treemapRootToNode"],e),s=n&&n.type,d=e.layoutInfo,u=!this._oldTree,c=this._storage,h="treemapRootToNode"===s&&i&&c?{rootNodeGroup:c.nodeGroup[i.node.getRawIndex()],direction:n.direction}:null,p=this._giveContainerGroup(d),g=e.get("animation"),y=this._doRender(p,e,h);!g||u||s&&"treemapZoomToNode"!==s&&"treemapRootToNode"!==s?y.renderFinally():this._doAnimation(p,y,e,h),this._resetController(a),this._renderBreadcrumb(e,a,i)}},t.prototype._giveContainerGroup=function(e){var t=this._containerGroup;return t||(t=this._containerGroup=new E,this._initEvents(t),this.group.add(t)),t.x=e.x,t.y=e.y,t},t.prototype._doRender=function(e,t,a){var o=t.getData().tree,n=this._oldTree,r={nodeGroup:[],background:[],content:[]},i={nodeGroup:[],background:[],content:[]},s=this._storage,d=[];function u(e,o,n,u){return function(e,t,a,o,n,r,i,s,d,u){if(!i)return;var h=i.getLayout(),p=e.getData(),g=i.getModel();if(p.setItemGraphicEl(i.dataIndex,null),!h||!h.isInView)return;var y=h.width,f=h.height,m=h.borderWidth,w=h.invisible,I=i.getRawIndex(),L=s&&s.getRawIndex(),_=i.viewChildren,M=h.upperHeight,N=_&&_.length,O=g.getModel("itemStyle"),S=g.getModel(["emphasis","itemStyle"]),j=g.getModel(["blur","itemStyle"]),D=g.getModel(["select","itemStyle"]),T=O.get("borderRadius")||0,A=te("nodeGroup",E);if(!A)return;if(d.add(A),A.x=h.x||0,A.y=h.y||0,A.markRedraw(),F(A).nodeWidth=y,F(A).nodeHeight=f,h.isAboveViewRoot)return A;var V=te("background",k,u,W);V&&J(A,V,N&&h.upperLabelHeight);var C=g.get(["emphasis","focus"]),Z=g.get(["emphasis","blurScope"]),U="ancestor"===C?i.getAncestorsIndices():"descendant"===C?i.getDescendantIndices():C;if(N)Object(x.y)(A)&&Object(x.F)(A,!1),V&&(Object(x.F)(V,!0),p.setItemGraphicEl(i.dataIndex,V),Object(x.p)(V,U,Z));else{var q=te("content",k,u,X);q&&K(A,q),V.disableMorphing=!0,V&&Object(x.y)(V)&&Object(x.F)(V,!1),Object(x.F)(A,!0),p.setItemGraphicEl(i.dataIndex,A),Object(x.p)(A,U,Z)}return A;function J(t,a,o){var n=Object(b.a)(a);if(n.dataIndex=i.dataIndex,n.seriesIndex=e.seriesIndex,a.setShape({x:0,y:0,width:y,height:f,r:T}),w)Q(a);else{a.invisible=!1;var r=i.getVisual("style"),l=r.stroke,s=Y(O);s.fill=l;var d=H(S);d.fill=S.get("borderColor");var u=H(j);u.fill=j.get("borderColor");var c=H(D);if(c.fill=D.get("borderColor"),o){var h=y-2*m;$(a,l,r.opacity,{x:m,y:0,width:h,height:M})}else a.removeTextContent();a.setStyle(s),a.ensureState("emphasis").style=d,a.ensureState("blur").style=u,a.ensureState("select").style=c,Object(x.G)(a)}t.add(a)}function K(t,a){var o=Object(b.a)(a);o.dataIndex=i.dataIndex,o.seriesIndex=e.seriesIndex;var n=Math.max(y-2*m,0),r=Math.max(f-2*m,0);if(a.culling=!0,a.setShape({x:m,y:m,width:n,height:r,r:T}),w)Q(a);else{a.invisible=!1;var l=i.getVisual("style"),s=l.fill,d=Y(O);d.fill=s,d.decal=l.decal;var u=H(S),c=H(j),h=H(D);$(a,s,l.opacity,null),a.setStyle(d),a.ensureState("emphasis").style=u,a.ensureState("blur").style=c,a.ensureState("select").style=h,Object(x.G)(a)}t.add(a)}function Q(e){!e.invisible&&r.push(e)}function $(t,a,o,n){var r=g.getModel(n?z:G),s=Object(c.e)(g.get("name"),null),d=r.getShallow("show");Object(P.g)(t,Object(P.e)(g,n?z:G),{defaultText:d?s:null,inheritColor:a,defaultOpacity:o,labelFetcher:e,labelDataIndex:i.dataIndex});var u=t.getTextContent();if(u){var p=u.style,y=Object(l.normalizeCssArray)(p.padding||0);n&&(t.setTextConfig({layoutRect:n}),u.disableLabelLayout=!0),u.beforeUpdate=function(){var e=Math.max((n?n.width:t.shape.width)-y[1]-y[3],0),a=Math.max((n?n.height:t.shape.height)-y[0]-y[2],0);p.width===e&&p.height===a||u.setStyle({width:e,height:a})},p.truncateMinChar=2,p.lineOverflow="truncate",ee(p,n,h);var f=u.getState("emphasis");ee(f?f.style:null,n,h)}}function ee(t,a,o){var n=t?t.text:null;if(!a&&o.isLeafRoot&&null!=n){var r=e.get("drillDownIcon",!0);t.text=r?r+" "+n:n}}function te(e,o,r,i){var l=null!=L&&a[e][L],s=n[e];return l?(a[e][L]=null,ae(s,l)):w||((l=new o)instanceof R.c&&(l.z2=function(e,t){return e*B+t}(r,i)),oe(s,l)),t[e][I]=l}function ae(e,t){var a=e[I]={};t instanceof E?(a.oldX=t.x,a.oldY=t.y):a.oldShape=Object(l.extend)({},t.shape)}function oe(e,t){var a=e[I]={},r=i.parentNode,l=t instanceof v.a;if(r&&(!o||"drillDown"===o.direction)){var s=0,d=0,u=n.background[r.getRawIndex()];!o&&u&&u.oldShape&&(s=u.oldShape.width,d=u.oldShape.height),l?(a.oldX=0,a.oldY=d):a.oldShape={x:s,y:d,width:0,height:0}}a.fadein=!l}}(t,i,s,a,r,d,e,o,n,u)}!function e(t,a,o,n,r){n?(a=t,Object(l.each)(t,(function(e,t){!e.isRemoved()&&s(t,t)}))):new w.a(a,t,i,i).add(s).update(s).remove(Object(l.curry)(s,null)).execute();function i(e){return e.getId()}function s(i,l){var s=null!=i?t[i]:null,d=null!=l?a[l]:null,c=u(s,d,o,r);c&&e(s&&s.viewChildren||[],d&&d.viewChildren||[],c,n,r+1)}}(o.root?[o.root]:[],n&&n.root?[n.root]:[],e,o===n||!n,0);var h=function(e){var t={nodeGroup:[],background:[],content:[]};return e&&Object(l.each)(e,(function(e,a){var o=t[a];Object(l.each)(e,(function(e){e&&(o.push(e),F(e).willDelete=!0)}))})),t}(s);return this._oldTree=o,this._storage=i,{lastsForAnimation:r,willDeleteEls:h,renderFinally:function(){Object(l.each)(h,(function(e){Object(l.each)(e,(function(e){e.parent&&e.parent.remove(e)}))})),Object(l.each)(d,(function(e){e.invisible=!0,e.dirty()}))}}},t.prototype._doAnimation=function(e,t,a,o){var n=a.get("animationDurationUpdate"),r=a.get("animationEasing"),i=(Object(l.isFunction)(n)?0:n)||0,s=(Object(l.isFunction)(r)?null:r)||"cubicOut",d=T.a();Object(l.each)(t.willDeleteEls,(function(e,t){Object(l.each)(e,(function(e,a){if(!e.invisible){var n,r=e.parent,l=F(r);if(o&&"drillDown"===o.direction)n=r===o.rootNodeGroup?{shape:{x:0,y:0,width:l.nodeWidth,height:l.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var u=0,c=0;l.willDelete||(u=l.nodeWidth/2,c=l.nodeHeight/2),n="nodeGroup"===t?{x:u,y:c,style:{opacity:0}}:{shape:{x:u,y:c,width:0,height:0},style:{opacity:0}}}n&&d.add(e,n,i,0,s)}}))})),Object(l.each)(this._storage,(function(e,a){Object(l.each)(e,(function(e,o){var n=t.lastsForAnimation[a][o],r={};n&&(e instanceof v.a?null!=n.oldX&&(r.x=e.x,r.y=e.y,e.x=n.oldX,e.y=n.oldY):(n.oldShape&&(r.shape=Object(l.extend)({},e.shape),e.setShape(n.oldShape)),n.fadein?(e.setStyle("opacity",0),r.style={opacity:1}):1!==e.style.opacity&&(r.style={opacity:1})),d.add(e,r,i,0,s))}))}),this),this._state="animating",d.finished(Object(l.bind)((function(){this._state="ready",t.renderFinally()}),this)).start()},t.prototype._resetController=function(e){var t=this._controller;t||((t=this._controller=new S.a(e.getZr())).enable(this.seriesModel.get("roam")),t.on("pan",Object(l.bind)(this._onPan,this)),t.on("zoom",Object(l.bind)(this._onZoom,this)));var a=new j.a(0,0,e.getWidth(),e.getHeight());t.setPointerChecker((function(e,t,o){return a.contain(t,o)}))},t.prototype._clearController=function(){var e=this._controller;e&&(e.dispose(),e=null)},t.prototype._onPan=function(e){if("animating"!==this._state&&(Math.abs(e.dx)>3||Math.abs(e.dy)>3)){var t=this.seriesModel.getData().tree.root;if(!t)return;var a=t.getLayout();if(!a)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:a.x+e.dx,y:a.y+e.dy,width:a.width,height:a.height}})}},t.prototype._onZoom=function(e){var t=e.originX,a=e.originY;if("animating"!==this._state){var o=this.seriesModel.getData().tree.root;if(!o)return;var n=o.getLayout();if(!n)return;var r=new j.a(n.x,n.y,n.width,n.height),i=this.seriesModel.layoutInfo;t-=i.x,a-=i.y;var l=D.create();D.translate(l,l,[-t,-a]),D.scale(l,l,[e.scale,e.scale]),D.translate(l,l,[t,a]),r.applyTransform(l),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:r.x,y:r.y,width:r.width,height:r.height}})}},t.prototype._initEvents=function(e){var t=this;e.on("click",(function(e){if("ready"===t._state){var a=t.seriesModel.get("nodeClick",!0);if(a){var o=t.findTarget(e.offsetX,e.offsetY);if(o){var n=o.node;if(n.getLayout().isLeafRoot)t._rootToNode(o);else if("zoomToNode"===a)t._zoomToNode(o);else if("link"===a){var r=n.hostTree.data.getItemModel(n.dataIndex),i=r.get("link",!0),l=r.get("target",!0)||"blank";i&&Object(C.l)(i,l)}}}}}),this)},t.prototype._renderBreadcrumb=function(e,t,a){var n=this;a||(a=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(t.getWidth()/2,t.getHeight()/2))||(a={node:e.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new O(this.group))).render(e,t,a.node,(function(t){"animating"!==n._state&&(o.a(e.getViewRoot(),t)?n._rootToNode({node:t}):n._zoomToNode({node:t}))}))},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype.findTarget=function(e,t){var a;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},(function(o){var n=this._storage.background[o.getRawIndex()];if(n){var r=n.transformCoordToLocal(e,t),i=n.shape;if(!(i.x<=r[0]&&r[0]<=i.x+i.width&&i.y<=r[1]&&r[1]<=i.y+i.height))return!1;a={node:o,offsetX:r[0],offsetY:r[1]}}}),this),a},t.type="treemap",t}(V.a);var U=Z,q=a(123),J=a(69),K=Object(c.o)(),Q={seriesType:"treemap",reset:function(e){var t=e.getData().tree.root;t.isRemoved()||$(t,{},e.getViewRoot().getAncestors(),e)}};function $(e,t,a,o){var n=e.getModel(),r=e.getLayout(),i=e.hostTree.data;if(r&&!r.invisible&&r.isInView){var s,d=n.getModel("itemStyle"),u=function(e,t,a){var o=Object(l.extend)({},t),n=a.designatedVisualItemStyle;return Object(l.each)(["color","colorAlpha","colorSaturation"],(function(a){n[a]=t[a];var r=e.get(a);n[a]=null,null!=r&&(o[a]=r)})),o}(d,t,o),c=i.ensureUniqueItemVisual(e.dataIndex,"style"),h=d.get("borderColor"),p=d.get("borderColorSaturation");null!=p&&(h=function(e,t){return null!=t?Object(J.modifyHSL)(t,null,null,e):null}(p,s=ee(u))),c.stroke=h;var g=e.viewChildren;if(g&&g.length){var y=function(e,t,a,o,n,r){if(!r||!r.length)return;var i=ae(t,"color")||null!=n.color&&"none"!==n.color&&(ae(t,"colorAlpha")||ae(t,"colorSaturation"));if(!i)return;var l=t.get("visualMin"),s=t.get("visualMax"),d=a.dataExtent.slice();null!=l&&l<d[0]&&(d[0]=l),null!=s&&s>d[1]&&(d[1]=s);var u=t.get("colorMappingBy"),c={type:i.name,dataExtent:d,visual:i.range};"color"!==c.type||"index"!==u&&"id"!==u?c.mappingMethod="linear":(c.mappingMethod="category",c.loop=!0);var h=new q.a(c);return K(h).drColorMappingBy=u,h}(0,n,r,0,u,g);Object(l.each)(g,(function(e,t){if(e.depth>=a.length||e===a[e.depth]){var r=function(e,t,a,o,n,r){var i=Object(l.extend)({},t);if(n){var s=n.type,d="color"===s&&K(n).drColorMappingBy,u="index"===d?o:"id"===d?r.mapIdToIndex(a.getId()):a.getValue(e.get("visualDimension"));i[s]=n.mapValueToVisual(u)}return i}(n,u,e,t,y,o);$(e,r,a,o)}}))}else s=ee(u),c.fill=s}}function ee(e){var t=te(e,"color");if(t){var a=te(e,"colorAlpha"),o=te(e,"colorSaturation");return o&&(t=Object(J.modifyHSL)(t,null,null,o)),a&&(t=Object(J.modifyAlpha)(t,a)),t}}function te(e,t){var a=e[t];if(null!=a&&"none"!==a)return a}function ae(e,t){var a=e.get(t);return Object(l.isArray)(a)&&a.length?{name:t,range:a}:null}var oe=a(9),ne=Math.max,re=Math.min,ie=l.retrieve,le=l.each,se=["itemStyle","borderWidth"],de=["itemStyle","gapWidth"],ue=["upperLabel","show"],ce=["upperLabel","height"],he={seriesType:"treemap",reset:function(e,t,a,n){var r=a.getWidth(),i=a.getHeight(),s=e.option,d=_.g(e.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()}),u=s.size||[],c=Object(oe.p)(ie(d.width,u[0]),r),h=Object(oe.p)(ie(d.height,u[1]),i),p=n&&n.type,g=o.c(n,["treemapZoomToNode","treemapRootToNode"],e),y="treemapRender"===p||"treemapMove"===p?n.rootRect:null,f=e.getViewRoot(),v=o.b(f);if("treemapMove"!==p){var m="treemapZoomToNode"===p?function(e,t,a,o,n){var r,i=(t||{}).node,l=[o,n];if(!i||i===a)return l;var s=o*n,d=s*e.option.zoomToNodeRatio;for(;r=i.parentNode;){for(var u=0,c=r.children,h=0,p=c.length;h<p;h++)u+=c[h].getValue();var g=i.getValue();if(0===g)return l;d*=u/g;var y=r.getModel(),f=y.get(se);(d+=4*f*f+(3*f+Math.max(f,ve(y)))*Math.pow(d,.5))>oe.a&&(d=oe.a),i=r}d<s&&(d=s);var v=Math.pow(d/s,.5);return[o*v,n*v]}(e,g,f,c,h):y?[y.width,y.height]:[c,h],b=s.sort;b&&"asc"!==b&&"desc"!==b&&(b="desc");var x={squareRatio:s.squareRatio,sort:b,leafDepth:s.leafDepth};f.hostTree.clearLayouts();var w={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]};f.setLayout(w),pe(f,x,!1,0),w=f.getLayout(),le(v,(function(e,t){var a=(v[t+1]||f).getValue();e.setLayout(l.extend({dataExtent:[a,a],borderWidth:0,upperHeight:0},w))}))}var I=e.getData().tree.root;I.setLayout(function(e,t,a){if(t)return{x:t.x,y:t.y};var o={x:0,y:0};if(!a)return o;var n=a.node,r=n.getLayout();if(!r)return o;var i=[r.width/2,r.height/2],l=n;for(;l;){var s=l.getLayout();i[0]+=s.x,i[1]+=s.y,l=l.parentNode}return{x:e.width/2-i[0],y:e.height/2-i[1]}}(d,y,g),!0),e.setLayoutInfo(d),fe(I,new j.a(-d.x,-d.y,r,i),v,f,0)}};function pe(e,t,a,o){var n,r;if(!e.isRemoved()){var i=e.getLayout();n=i.width,r=i.height;var s=e.getModel(),d=s.get(se),u=s.get(de)/2,c=ve(s),h=Math.max(d,c),p=d-u,g=h-u;e.setLayout({borderWidth:d,upperHeight:h,upperLabelHeight:c},!0);var y=(n=ne(n-2*p,0))*(r=ne(r-p-g,0)),f=function(e,t,a,o,n,r){var i=e.children||[],s=o.sort;"asc"!==s&&"desc"!==s&&(s=null);var d=null!=o.leafDepth&&o.leafDepth<=r;if(n&&!d)return e.viewChildren=[];i=l.filter(i,(function(e){return!e.isRemoved()})),function(e,t){t&&e.sort((function(e,a){var o="asc"===t?e.getValue()-a.getValue():a.getValue()-e.getValue();return 0===o?"asc"===t?e.dataIndex-a.dataIndex:a.dataIndex-e.dataIndex:o}))}(i,s);var u=function(e,t,a){for(var o=0,n=0,r=t.length;n<r;n++)o+=t[n].getValue();var i,l=e.get("visualDimension");t&&t.length?"value"===l&&a?(i=[t[t.length-1].getValue(),t[0].getValue()],"asc"===a&&i.reverse()):(i=[1/0,-1/0],le(t,(function(e){var t=e.getValue(l);t<i[0]&&(i[0]=t),t>i[1]&&(i[1]=t)}))):i=[NaN,NaN];return{sum:o,dataExtent:i}}(t,i,s);if(0===u.sum)return e.viewChildren=[];if(u.sum=function(e,t,a,o,n){if(!o)return a;for(var r=e.get("visibleMin"),i=n.length,l=i,s=i-1;s>=0;s--){var d=n["asc"===o?i-s-1:s].getValue();d/a*t<r&&(l=s,a-=d)}return"asc"===o?n.splice(0,i-l):n.splice(l,i-l),a}(t,a,u.sum,s,i),0===u.sum)return e.viewChildren=[];for(var c=0,h=i.length;c<h;c++){var p=i[c].getValue()/u.sum*a;i[c].setLayout({area:p})}d&&(i.length&&e.setLayout({isLeafRoot:!0},!0),i.length=0);return e.viewChildren=i,e.setLayout({dataExtent:u.dataExtent},!0),i}(e,s,y,t,a,o);if(f.length){var v={x:p,y:g,width:n,height:r},m=re(n,r),b=1/0,x=[];x.area=0;for(var w=0,I=f.length;w<I;){var L=f[w];x.push(L),x.area+=L.getLayout().area;var _=ge(x,m,t.squareRatio);_<=b?(w++,b=_):(x.area-=x.pop().getLayout().area,ye(x,m,v,u,!1),m=re(v.width,v.height),x.length=x.area=0,b=1/0)}if(x.length&&ye(x,m,v,u,!0),!a){var M=s.get("childrenVisibleMin");null!=M&&y<M&&(a=!0)}for(w=0,I=f.length;w<I;w++)pe(f[w],t,a,o+1)}}}function ge(e,t,a){for(var o=0,n=1/0,r=0,i=void 0,l=e.length;r<l;r++)(i=e[r].getLayout().area)&&(i<n&&(n=i),i>o&&(o=i));var s=e.area*e.area,d=t*t*a;return s?ne(d*o/s,s/(d*n)):1/0}function ye(e,t,a,o,n){var r=t===a.width?0:1,i=1-r,l=["x","y"],s=["width","height"],d=a[l[r]],u=t?e.area/t:0;(n||u>a[s[i]])&&(u=a[s[i]]);for(var c=0,h=e.length;c<h;c++){var p=e[c],g={},y=u?p.getLayout().area/u:0,f=g[s[i]]=ne(u-2*o,0),v=a[l[r]]+a[s[r]]-d,m=c===h-1||v<y?v:y,b=g[s[r]]=ne(m-2*o,0);g[l[i]]=a[l[i]]+re(o,f/2),g[l[r]]=d+re(o,b/2),d+=m,p.setLayout(g,!0)}a[l[i]]+=u,a[s[i]]-=u}function fe(e,t,a,o,n){var r=e.getLayout(),i=a[n],l=i&&i===e;if(!(i&&!l||n===a.length&&e!==o)){e.setLayout({isInView:!0,invisible:!l&&!t.intersect(r),isAboveViewRoot:l},!0);var s=new j.a(t.x-r.x,t.y-r.y,t.width,t.height);le(e.viewChildren||[],(function(e){fe(e,s,a,o,n+1)}))}}function ve(e){return e.get(ue)?e.get(ce):0}function me(e){e.registerSeriesModel(f),e.registerChartView(U),e.registerVisual(Q),e.registerLayout(he),function(e){for(var t=0;t<r.length;t++)e.registerAction({type:r[t],update:"updateView"},n);e.registerAction({type:"treemapRootToNode",update:"updateView"},(function(e,t){t.eachComponent({mainType:"series",subType:"treemap",query:e},(function(t,a){var n=o.c(e,["treemapZoomToNode","treemapRootToNode"],t);if(n){var r=t.getViewRoot();r&&(e.direction=o.a(r,n.node)?"rollUp":"drillDown"),t.resetViewRoot(n.node)}}))}))}(e)}},1713:function(e,t,a){"use strict";a.d(t,"a",(function(){return P}));var o=a(8),n=a(1),r=a(61),i=a(130),l=a(73),s=a(317),d=a(13),u=a(33),c=a(37),h=a(352),p=a(301),g=function(e){function t(t,a,o,n){var r=e.call(this)||this;r.z2=2,r.textConfig={inside:!0},Object(c.a)(r).seriesIndex=a.seriesIndex;var l=new i.a({z2:4,silent:t.getModel().get(["label","silent"])});return r.setTextContent(l),r.updateData(!0,t,a,o,n),r}return Object(o.b)(t,e),t.prototype.updateData=function(e,t,a,o,r){this.node=t,t.piece=this,a=a||this._seriesModel,o=o||this._ecModel;var i=this;Object(c.a)(i).dataIndex=t.dataIndex;var s=t.getModel(),u=s.getModel("emphasis"),g=t.getLayout(),y=n.extend({},g);y.label=null;var f=t.getVisual("style");f.lineJoin="bevel";var v=t.getVisual("decal");v&&(f.decal=Object(p.a)(v,r));var m=Object(h.a)(s.getModel("itemStyle"),y,!0);n.extend(y,m),n.each(d.g,(function(e){var t=i.ensureState(e),a=s.getModel([e,"itemStyle"]);t.style=a.getItemStyle();var o=Object(h.a)(a,y);o&&(t.shape=o)})),e?(i.setShape(y),i.shape.r=g.r0,l.h(i,{shape:{r:g.r}},a,t.dataIndex)):(l.h(i,{shape:y},a),Object(l.g)(i)),i.useStyle(f),this._updateLabel(a);var b=s.getShallow("cursor");b&&i.attr("cursor",b),this._seriesModel=a||this._seriesModel,this._ecModel=o||this._ecModel;var x=u.get("focus"),w="ancestor"===x?t.getAncestorsIndices():"descendant"===x?t.getDescendantIndices():x;Object(d.o)(this,w,u.get("blurScope"))},t.prototype._updateLabel=function(e){var t=this,a=this.node.getModel(),o=a.getModel("label"),r=this.node.getLayout(),i=r.endAngle-r.startAngle,l=(r.startAngle+r.endAngle)/2,s=Math.cos(l),c=Math.sin(l),h=this,p=h.getTextContent(),g=this.node.dataIndex,y=o.get("minAngle")/180*Math.PI,f=o.get("show")&&!(null!=y&&Math.abs(i)<y);function v(e,t){var a=e.get(t);return null==a?o.get(t):a}p.ignore=!f,n.each(d.a,(function(o){var n="normal"===o?a.getModel("label"):a.getModel([o,"label"]),i="normal"===o,d=i?p:p.ensureState(o),y=e.getFormattedLabel(g,o);i&&(y=y||t.node.name),d.style=Object(u.c)(n,{},null,"normal"!==o,!0),y&&(d.style.text=y);var f=n.get("show");null==f||i||(d.ignore=!f);var m,b=v(n,"position"),x=i?h:h.states[o],w=x.style.fill;x.textConfig={outsideFill:"inherit"===n.get("color")?w:null,inside:"outside"!==b};var I=v(n,"distance")||0,L=v(n,"align");"outside"===b?(m=r.r+I,L=l>Math.PI/2?"right":"left"):L&&"center"!==L?"left"===L?(m=r.r0+I,l>Math.PI/2&&(L="right")):"right"===L&&(m=r.r-I,l>Math.PI/2&&(L="left")):(m=(r.r+r.r0)/2,L="center"),d.style.align=L,d.style.verticalAlign=v(n,"verticalAlign")||"middle",d.x=m*s+r.cx,d.y=m*c+r.cy;var _=v(n,"rotate"),M=0;"radial"===_?(M=-l)<-Math.PI/2&&(M+=Math.PI):"tangential"===_?(M=Math.PI/2-l)>Math.PI/2?M-=Math.PI:M<-Math.PI/2&&(M+=Math.PI):"number"===typeof _&&(M=_*Math.PI/180),d.rotation=M})),p.dirtyStyle()},t}(s.a),y=a(163),f=a(140),v="sunburstRootToNode",m="sunburstHighlight";var b=a(58),x=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a}return Object(o.b)(t,e),t.prototype.render=function(e,t,a,o){var r=this;this.seriesModel=e,this.api=a,this.ecModel=t;var i=e.getData(),l=i.tree.root,s=e.getViewRoot(),d=this.group,u=e.get("renderLabelForZeroData"),c=[];s.eachNode((function(e){c.push(e)}));var h=this._oldChildren||[];!function(o,r){if(0===o.length&&0===r.length)return;function s(e){return e.getId()}function c(n,s){!function(o,n){u||!o||o.getValue()||(o=null);if(o!==l&&n!==l)if(n&&n.piece)o?(n.piece.updateData(!1,o,e,t,a),i.setItemGraphicEl(o.dataIndex,n.piece)):function(e){if(!e)return;e.piece&&(d.remove(e.piece),e.piece=null)}(n);else if(o){var r=new g(o,e,t,a);d.add(r),i.setItemGraphicEl(o.dataIndex,r)}}(null==n?null:o[n],null==s?null:r[s])}new y.a(r,o,s,s).add(c).update(c).remove(n.curry(c,null)).execute()}(c,h),function(o,n){n.depth>0?(r.virtualPiece?r.virtualPiece.updateData(!1,o,e,t,a):(r.virtualPiece=new g(o,e,t,a),d.add(r.virtualPiece)),n.piece.off("click"),r.virtualPiece.on("click",(function(e){r._rootToNode(n.parentNode)}))):r.virtualPiece&&(d.remove(r.virtualPiece),r.virtualPiece=null)}(l,s),this._initEvents(),this._oldChildren=c},t.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",(function(t){var a=!1;e.seriesModel.getViewRoot().eachNode((function(o){if(!a&&o.piece&&o.piece===t.target){var n=o.getModel().get("nodeClick");if("rootToNode"===n)e._rootToNode(o);else if("link"===n){var r=o.getModel(),i=r.get("link");if(i){var l=r.get("target",!0)||"_blank";Object(b.l)(i,l)}}a=!0}}))}))},t.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:v,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},t.prototype.containPoint=function(e,t){var a=t.getData().getItemLayout(0);if(a){var o=e[0]-a.cx,n=e[1]-a.cy,r=Math.sqrt(o*o+n*n);return r<=a.r&&r>=a.r0}},t.type="sunburst",t}(r.a),w=x,I=a(62),L=a(409),_=a(66),M=a(633),N=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a.ignoreStyleOnData=!0,a}return Object(o.b)(t,e),t.prototype.getInitialData=function(e,t){var a={name:e.name,children:e.data};O(a);var o=this._levelModels=n.map(e.levels||[],(function(e){return new _.a(e,this,t)}),this),r=L.a.createTree(a,this,(function(e){e.wrapMethod("getItemModel",(function(e,t){var a=r.getNodeByDataIndex(t),n=o[a.depth];return n&&(e.parentModel=n),e}))}));return r.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(t){var a=e.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(t);return a.treePathInfo=Object(f.d)(o,this),a},t.prototype.getLevelModel=function(e){return this._levelModels&&this._levelModels[e.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)},t.prototype.enableAriaDecal=function(){Object(M.a)(this)},t.type="series.sunburst",t.defaultOption={zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t}(I.b);function O(e){var t=0;n.each(e.children,(function(e){O(e);var a=e.value;n.isArray(a)&&(a=a[0]),t+=a}));var a=e.value;n.isArray(a)&&(a=a[0]),(null==a||isNaN(a))&&(a=t),a<0&&(a=0),n.isArray(e.value)?e.value[0]=a:e.value=a}var S=N,j=a(9),D=Math.PI/180;function T(e,t,a){t.eachSeriesByType(e,(function(e){var t=e.get("center"),o=e.get("radius");n.isArray(o)||(o=[0,o]),n.isArray(t)||(t=[t,t]);var r=a.getWidth(),i=a.getHeight(),l=Math.min(r,i),s=Object(j.p)(t[0],r),d=Object(j.p)(t[1],i),u=Object(j.p)(o[0],l/2),c=Object(j.p)(o[1],l/2),h=-e.get("startAngle")*D,p=e.get("minAngle")*D,g=e.getData().tree.root,y=e.getViewRoot(),f=y.depth,v=e.get("sort");null!=v&&A(y,v);var m=0;n.each(y.children,(function(e){!isNaN(e.getValue())&&m++}));var b=y.getValue(),x=Math.PI/(b||m)*2,w=y.depth>0,I=y.height-(w?-1:1),L=(c-u)/(I||1),_=e.get("clockwise"),M=e.get("stillShowZeroSum"),N=_?1:-1;if(w){var O=u,S=u+L,T=2*Math.PI;g.setLayout({angle:T,startAngle:h,endAngle:h+T,clockwise:_,cx:s,cy:d,r0:O,r:S})}!function t(a,o){if(a){var r=o;if(a!==g){var i=a.getValue(),c=0===b&&M?x:i*x;c<p&&(c=p),r=o+N*c;var h=a.depth-f-(w?-1:1),y=u+L*h,v=u+L*(h+1),m=e.getLevelModel(a);if(m){var I=m.get("r0",!0),O=m.get("r",!0),S=m.get("radius",!0);null!=S&&(I=S[0],O=S[1]),null!=I&&(y=Object(j.p)(I,l/2)),null!=O&&(v=Object(j.p)(O,l/2))}a.setLayout({angle:c,startAngle:o,endAngle:r,clockwise:_,cx:s,cy:d,r0:y,r:v})}if(a.children&&a.children.length){var D=0;n.each(a.children,(function(e){D+=t(e,o+D)}))}return r-o}}(y,h)}))}function A(e,t){var a=e.children||[];e.children=function(e,t){if("function"===typeof t){var a=n.map(e,(function(e,t){var a=e.getValue();return{params:{depth:e.depth,height:e.height,dataIndex:e.dataIndex,getValue:function(){return a}},index:t}}));return a.sort((function(e,a){return t(e.params,a.params)})),n.map(a,(function(t){return e[t.index]}))}var o="asc"===t;return e.sort((function(e,t){var a=(e.getValue()-t.getValue())*(o?1:-1);return 0===a?(e.dataIndex-t.dataIndex)*(o?-1:1):a}))}(a,t),a.length&&n.each(e.children,(function(e){A(e,t)}))}var V=a(69);function R(e){var t={};e.eachSeriesByType("sunburst",(function(e){var a=e.getData(),o=a.tree;o.eachNode((function(r){var i=r.getModel().getModel("itemStyle").getItemStyle();i.fill||(i.fill=function(e,a,o){for(var n=e;n&&n.depth>1;)n=n.parentNode;var r=a.getColorFromPalette(n.name||n.dataIndex+"",t);return e.depth>1&&"string"===typeof r&&(r=Object(V.lift)(r,(e.depth-1)/(o-1)*.5)),r}(r,e,o.root.height));var l=a.ensureUniqueItemVisual(r.dataIndex,"style");Object(n.extend)(l,i)}))}))}var C=a(274);function P(e){e.registerChartView(w),e.registerSeriesModel(S),e.registerLayout(Object(n.curry)(T,"sunburst")),e.registerProcessor(Object(n.curry)(C.a,"sunburst")),e.registerVisual(R),function(e){e.registerAction({type:v,update:"updateView"},(function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},(function(t,a){var o=Object(f.c)(e,[v],t);if(o){var n=t.getViewRoot();n&&(e.direction=Object(f.a)(n,o.node)?"rollUp":"drillDown"),t.resetViewRoot(o.node)}}))})),e.registerAction({type:m,update:"none"},(function(e,t,a){e=Object(n.extend)({},e),t.eachComponent({mainType:"series",subType:"sunburst",query:e},(function(t){var a=Object(f.c)(e,[m],t);a&&(e.dataIndex=a.node.dataIndex)})),a.dispatchAction(Object(n.extend)(e,{type:"highlight"}))})),e.registerAction({type:"sunburstUnhighlight",update:"updateView"},(function(e,t,a){e=Object(n.extend)({},e),a.dispatchAction(Object(n.extend)(e,{type:"downplay"}))}))}(e)}},1721:function(e,t,a){"use strict";a.d(t,"a",(function(){return G}));var o=a(8),n=a(45),r=a(401),i=a(119),l=a(73),s=a(13),d=a(61),u=a(33),c=a(37),h=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0},p=function(e){function t(t){return e.call(this,t)||this}return Object(o.b)(t,e),t.prototype.getDefaultShape=function(){return new h},t.prototype.buildPath=function(e,t){var a=t.extent;e.moveTo(t.x1,t.y1),e.bezierCurveTo(t.cpx1,t.cpy1,t.cpx2,t.cpy2,t.x2,t.y2),"vertical"===t.orient?(e.lineTo(t.x2+a,t.y2),e.bezierCurveTo(t.cpx2+a,t.cpy2,t.cpx1+a,t.cpy1,t.x1+a,t.y1)):(e.lineTo(t.x2,t.y2+a),e.bezierCurveTo(t.cpx2,t.cpy2+a,t.cpx1,t.cpy1+a,t.x1,t.y1+a)),e.closePath()},t.prototype.highlight=function(){Object(s.r)(this)},t.prototype.downplay=function(){Object(s.C)(this)},t}(n.b),g=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a._focusAdjacencyDisabled=!1,a}return Object(o.b)(t,e),t.prototype.render=function(e,t,a){var o=this,n=e.getGraph(),d=this.group,h=e.layoutInfo,g=h.width,y=h.height,f=e.getData(),v=e.getData("edge"),m=e.get("orient");this._model=e,d.removeAll(),d.x=h.x,d.y=h.y,n.eachEdge((function(t){var a=new p,o=Object(c.a)(a);o.dataIndex=t.dataIndex,o.seriesIndex=e.seriesIndex,o.dataType="edge";var n,i,l,u,h,f,b,x,w=t.getModel(),I=w.getModel("lineStyle"),L=I.get("curveness"),_=t.node1.getLayout(),M=t.node1.getModel(),N=M.get("localX"),O=M.get("localY"),S=t.node2.getLayout(),j=t.node2.getModel(),D=j.get("localX"),T=j.get("localY"),A=t.getLayout();switch(a.shape.extent=Math.max(1,A.dy),a.shape.orient=m,"vertical"===m?(n=(null!=N?N*g:_.x)+A.sy,i=(null!=O?O*y:_.y)+_.dy,l=(null!=D?D*g:S.x)+A.ty,h=n,f=i*(1-L)+(u=null!=T?T*y:S.y)*L,b=l,x=i*L+u*(1-L)):(n=(null!=N?N*g:_.x)+_.dx,i=(null!=O?O*y:_.y)+A.sy,h=n*(1-L)+(l=null!=D?D*g:S.x)*L,f=i,b=n*L+l*(1-L),x=u=(null!=T?T*y:S.y)+A.ty),a.setShape({x1:n,y1:i,x2:l,y2:u,cpx1:h,cpy1:f,cpx2:b,cpy2:x}),a.useStyle(I.getItemStyle()),a.style.fill){case"source":a.style.fill=t.node1.getVisual("color"),a.style.decal=t.node1.getVisual("style").decal;break;case"target":a.style.fill=t.node2.getVisual("color"),a.style.decal=t.node2.getVisual("style").decal;break;case"gradient":var V=t.node1.getVisual("color"),R=t.node2.getVisual("color");"string"===typeof V&&"string"===typeof R&&(a.style.fill=new r.a(0,0,+("horizontal"===m),+("vertical"===m),[{color:V,offset:0},{color:R,offset:1}]))}var C=w.getModel("emphasis");Object(s.I)(a,w,"lineStyle",(function(e){return e.getItemStyle()})),d.add(a),v.setItemGraphicEl(t.dataIndex,a);var P=C.get("focus");Object(s.o)(a,"adjacency"===P?t.getAdjacentDataIndices():P,C.get("blurScope")),Object(c.a)(a).dataType="edge"})),n.eachNode((function(t){var a=t.getLayout(),o=t.getModel(),n=o.get("localX"),r=o.get("localY"),l=o.getModel("emphasis"),h=new i.a({shape:{x:null!=n?n*g:a.x,y:null!=r?r*y:a.y,width:a.dx,height:a.dy},style:o.getModel("itemStyle").getItemStyle(),z2:10});Object(u.g)(h,Object(u.e)(o),{labelFetcher:e,labelDataIndex:t.dataIndex,defaultText:t.id}),h.disableLabelAnimation=!0,h.setStyle("fill",t.getVisual("color")),h.setStyle("decal",t.getVisual("style").decal),Object(s.I)(h,o),d.add(h),f.setItemGraphicEl(t.dataIndex,h),Object(c.a)(h).dataType="node";var p=l.get("focus");Object(s.o)(h,"adjacency"===p?t.getAdjacentDataIndices():p,l.get("blurScope"))})),f.eachItemGraphicEl((function(t,n){f.getItemModel(n).get("draggable")&&(t.drift=function(t,r){o._focusAdjacencyDisabled=!0,this.shape.x+=t,this.shape.y+=r,this.dirty(),a.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:f.getRawIndex(n),localX:this.shape.x/g,localY:this.shape.y/y})},t.ondragend=function(){o._focusAdjacencyDisabled=!1},t.draggable=!0,t.cursor="move")})),!this._data&&e.isAnimationEnabled()&&d.setClipPath(function(e,t,a){var o=new i.a({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return l.c(o,{shape:{width:e.width+20}},t,a),o}(d.getBoundingRect(),e,(function(){d.removeClipPath()}))),this._data=e.getData()},t.prototype.dispose=function(){},t.type="sankey",t}(d.a);var y=g,f=a(62),v=a(634),m=a(66),b=a(76),x=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a}return Object(o.b)(t,e),t.prototype.getInitialData=function(e,t){var a=e.edges||e.links,o=e.data||e.nodes,n=e.levels;this.levelModels=[];for(var r=this.levelModels,i=0;i<n.length;i++)null!=n[i].depth&&n[i].depth>=0&&(r[n[i].depth]=new m.a(n[i],this,t));if(o&&a){var l=Object(v.a)(o,a,this,!0,(function(e,t){e.wrapMethod("getItemModel",(function(e,t){var a=e.parentModel,o=a.getData().getItemLayout(t);if(o){var n=o.depth,r=a.levelModels[n];r&&(e.parentModel=r)}return e})),t.wrapMethod("getItemModel",(function(e,t){var a=e.parentModel,o=a.getGraph().getEdgeByIndex(t).node1.getLayout();if(o){var n=o.depth,r=a.levelModels[n];r&&(e.parentModel=r)}return e}))}));return l.data}},t.prototype.setNodePosition=function(e,t){var a=(this.option.data||this.option.nodes)[e];a.localX=t[0],a.localY=t[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(e,t,a){function o(e){return isNaN(e)||null==e}if("edge"===a){var n=this.getDataParams(e,a),r=n.data,i=n.value,l=r.source+" -- "+r.target;return Object(b.c)("nameValue",{name:l,value:i,noValue:o(i)})}var s=this.getGraph().getNodeByIndex(e).getLayout().value,d=this.getDataParams(e,a).data.name;return Object(b.c)("nameValue",{name:null!=d?d+"":null,value:s,noValue:o(s)})},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(t,a){var o=e.prototype.getDataParams.call(this,t,a);if(null==o.value&&"node"===a){var n=this.getGraph().getNodeByIndex(t).getLayout().value;o.value=n}return o},t.type="series.sankey",t.defaultOption={zlevel:0,z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t}(f.b),w=x,I=a(40),L=a(1),_=a(11);function M(e,t){e.eachSeriesByType("sankey",(function(e){var a=e.get("nodeWidth"),o=e.get("nodeGap"),n=function(e,t){return I.g(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t);e.layoutInfo=n;var r=n.width,i=n.height,l=e.getGraph(),s=l.nodes,d=l.edges;!function(e){L.each(e,(function(e){var t=C(e.outEdges,R),a=C(e.inEdges,R),o=e.getValue()||0,n=Math.max(t,a,o);e.setLayout({value:n},!0)}))}(s),function(e,t,a,o,n,r,i,l,s){(function(e,t,a,o,n,r,i){for(var l=[],s=[],d=[],u=[],c=0,h=0;h<t.length;h++)l[h]=1;for(h=0;h<e.length;h++)s[h]=e[h].inEdges.length,0===s[h]&&d.push(e[h]);var p=-1;for(;d.length;){for(var g=0;g<d.length;g++){var y=d[g],f=y.hostGraph.data.getRawDataItem(y.dataIndex),v=null!=f.depth&&f.depth>=0;v&&f.depth>p&&(p=f.depth),y.setLayout({depth:v?f.depth:c},!0),"vertical"===r?y.setLayout({dy:a},!0):y.setLayout({dx:a},!0);for(var m=0;m<y.outEdges.length;m++){var b=y.outEdges[m];l[t.indexOf(b)]=0;var x=b.node2;0===--s[e.indexOf(x)]&&u.indexOf(x)<0&&u.push(x)}}++c,d=u,u=[]}for(h=0;h<l.length;h++)if(1===l[h])throw new Error("Sankey is a DAG, the original data has cycle!");var w=p>c-1?p:c-1;i&&"left"!==i&&function(e,t,a,o){if("right"===t){for(var n=[],r=e,i=0;r.length;){for(var l=0;l<r.length;l++){var s=r[l];s.setLayout({skNodeHeight:i},!0);for(var d=0;d<s.inEdges.length;d++){var u=s.inEdges[d];n.indexOf(u.node1)<0&&n.push(u.node1)}}r=n,n=[],++i}L.each(e,(function(e){N(e)||e.setLayout({depth:Math.max(0,o-e.getLayout().skNodeHeight)},!0)}))}else"justify"===t&&function(e,t){L.each(e,(function(e){N(e)||e.outEdges.length||e.setLayout({depth:t},!0)}))}(e,o)}(e,i,0,w);!function(e,t,a){L.each(e,(function(e){var o=e.getLayout().depth*t;"vertical"===a?e.setLayout({y:o},!0):e.setLayout({x:o},!0)}))}(e,"vertical"===r?(n-a)/w:(o-a)/w,r)})(e,t,a,n,r,l,s),function(e,t,a,o,n,r,i){var l=function(e,t){var a=[],o="vertical"===t?"y":"x",n=Object(_.j)(e,(function(e){return e.getLayout()[o]}));return n.keys.sort((function(e,t){return e-t})),L.each(n.keys,(function(e){a.push(n.buckets.get(e))})),a}(e,i);(function(e,t,a,o,n,r){var i=1/0;L.each(e,(function(e){var t=e.length,l=0;L.each(e,(function(e){l+=e.getLayout().value}));var s="vertical"===r?(o-(t-1)*n)/l:(a-(t-1)*n)/l;s<i&&(i=s)})),L.each(e,(function(e){L.each(e,(function(e,t){var a=e.getLayout().value*i;"vertical"===r?(e.setLayout({x:t},!0),e.setLayout({dx:a},!0)):(e.setLayout({y:t},!0),e.setLayout({dy:a},!0))}))})),L.each(t,(function(e){var t=+e.getValue()*i;e.setLayout({dy:t},!0)}))})(l,t,a,o,n,i),O(l,n,a,o,i);for(var s=1;r>0;r--)S(l,s*=.99,i),O(l,n,a,o,i),P(l,s,i),O(l,n,a,o,i)}(e,t,r,n,o,i,l),function(e,t){var a="vertical"===t?"x":"y";L.each(e,(function(e){e.outEdges.sort((function(e,t){return e.node2.getLayout()[a]-t.node2.getLayout()[a]})),e.inEdges.sort((function(e,t){return e.node1.getLayout()[a]-t.node1.getLayout()[a]}))})),L.each(e,(function(e){var t=0,a=0;L.each(e.outEdges,(function(e){e.setLayout({sy:t},!0),t+=e.getLayout().dy})),L.each(e.inEdges,(function(e){e.setLayout({ty:a},!0),a+=e.getLayout().dy}))}))}(e,l)}(s,d,a,o,r,i,0!==L.filter(s,(function(e){return 0===e.getLayout().value})).length?0:e.get("layoutIterations"),e.get("orient"),e.get("nodeAlign"))}))}function N(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return null!=t.depth&&t.depth>=0}function O(e,t,a,o,n){var r="vertical"===n?"x":"y";L.each(e,(function(e){var i,l,s;e.sort((function(e,t){return e.getLayout()[r]-t.getLayout()[r]}));for(var d=0,u=e.length,c="vertical"===n?"dx":"dy",h=0;h<u;h++)(s=d-(l=e[h]).getLayout()[r])>0&&(i=l.getLayout()[r]+s,"vertical"===n?l.setLayout({x:i},!0):l.setLayout({y:i},!0)),d=l.getLayout()[r]+l.getLayout()[c]+t;if((s=d-t-("vertical"===n?o:a))>0){i=l.getLayout()[r]-s,"vertical"===n?l.setLayout({x:i},!0):l.setLayout({y:i},!0),d=i;for(h=u-2;h>=0;--h)(s=(l=e[h]).getLayout()[r]+l.getLayout()[c]+t-d)>0&&(i=l.getLayout()[r]-s,"vertical"===n?l.setLayout({x:i},!0):l.setLayout({y:i},!0)),d=l.getLayout()[r]}}))}function S(e,t,a){L.each(e.slice().reverse(),(function(e){L.each(e,(function(e){if(e.outEdges.length){var o=C(e.outEdges,j,a)/C(e.outEdges,R);if(isNaN(o)){var n=e.outEdges.length;o=n?C(e.outEdges,D,a)/n:0}if("vertical"===a){var r=e.getLayout().x+(o-V(e,a))*t;e.setLayout({x:r},!0)}else{var i=e.getLayout().y+(o-V(e,a))*t;e.setLayout({y:i},!0)}}}))}))}function j(e,t){return V(e.node2,t)*e.getValue()}function D(e,t){return V(e.node2,t)}function T(e,t){return V(e.node1,t)*e.getValue()}function A(e,t){return V(e.node1,t)}function V(e,t){return"vertical"===t?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function R(e){return e.getValue()}function C(e,t,a){for(var o=0,n=e.length,r=-1;++r<n;){var i=+t(e[r],a);isNaN(i)||(o+=i)}return o}function P(e,t,a){L.each(e,(function(e){L.each(e,(function(e){if(e.inEdges.length){var o=C(e.inEdges,T,a)/C(e.inEdges,R);if(isNaN(o)){var n=e.inEdges.length;o=n?C(e.inEdges,A,a)/n:0}if("vertical"===a){var r=e.getLayout().x+(o-V(e,a))*t;e.setLayout({x:r},!0)}else{var i=e.getLayout().y+(o-V(e,a))*t;e.setLayout({y:i},!0)}}}))}))}var E=a(123);function k(e){e.eachSeriesByType("sankey",(function(e){var t=e.getGraph().nodes;if(t.length){var a=1/0,o=-1/0;L.each(t,(function(e){var t=e.getLayout().value;t<a&&(a=t),t>o&&(o=t)})),L.each(t,(function(t){var n=new E.a({type:"color",mappingMethod:"linear",dataExtent:[a,o],visual:e.get("color")}).mapValueToVisual(t.getLayout().value),r=t.getModel().get(["itemStyle","color"]);null!=r?(t.setVisual("color",r),t.setVisual("style",{fill:r})):(t.setVisual("color",n),t.setVisual("style",{fill:n}))}))}}))}function G(e){e.registerChartView(y),e.registerSeriesModel(w),e.registerLayout(M),e.registerVisual(k),e.registerAction({type:"dragNode",event:"dragnode",update:"update"},(function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},(function(t){t.setNodePosition(e.dataIndex,[e.localX,e.localY])}))}))}},1728:function(e,t,a){"use strict";a.d(t,"a",(function(){return O}));var o=a(8),n=a(520),r=a(79),i=a(73),l=a(119),s=a(13),d=a(33),u=a(1),c=a(163),h=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a._layers=[],a}return Object(o.b)(t,e),t.prototype.render=function(e,t,a){var o=e.getData(),h=this,p=this.group,g=e.getLayerSeries(),y=o.getLayout("layoutInfo"),f=y.rect,v=y.boundaryGap;function m(e){return e.name}p.x=0,p.y=f.y+v[0];var b=new c.a(this._layersSeries||[],g,m,m),x=[];function w(t,a,u){var c=h._layers;if("remove"!==t){for(var y,f,v=[],m=[],b=g[a].indices,w=0;w<b.length;w++){var I=o.getItemLayout(b[w]),L=I.x,_=I.y0,M=I.y;v.push(L,_),m.push(L,_+M),y=o.getItemVisual(b[w],"style")}var N=o.getItemLayout(b[0]),O=e.getModel("label").get("margin"),S=e.getModel("emphasis");if("add"===t){var j=x[a]=new r.a;f=new n.a({shape:{points:v,stackedOnPoints:m,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),j.add(f),p.add(j),e.isAnimationEnabled()&&f.setClipPath(function(e,t,a){var o=new l.a({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return i.c(o,{shape:{x:e.x-50,width:e.width+100,height:e.height+20}},t,a),o}(f.getBoundingRect(),e,(function(){f.removeClipPath()})))}else{j=c[u];f=j.childAt(0),p.add(j),x[a]=j,i.h(f,{shape:{points:v,stackedOnPoints:m}},e),Object(i.g)(f)}Object(d.g)(f,Object(d.e)(e),{labelDataIndex:b[w-1],defaultText:o.getName(b[w-1]),inheritColor:y.fill},{normal:{verticalAlign:"middle"}}),f.setTextConfig({position:null,local:!0});var D=f.getTextContent();D&&(D.x=N.x-O,D.y=N.y0+N.y/2),f.useStyle(y),o.setItemGraphicEl(a,f),Object(s.I)(f,e),Object(s.o)(f,S.get("focus"),S.get("blurScope"))}else p.remove(c[a])}b.add(Object(u.bind)(w,this,"add")).update(Object(u.bind)(w,this,"update")).remove(Object(u.bind)(w,this,"remove")).execute(),this._layersSeries=g,this._layers=x},t.type="themeRiver",t}(a(61).a);var p=h,g=a(62),y=a(228),f=a(302),v=a(110),m=a(11),b=a(273),x=a(76),w=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a}return Object(o.b)(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new b.a(u.bind(this.getData,this),u.bind(this.getRawData,this))},t.prototype.fixData=function(e){var t=e.length,a={},o=Object(m.j)(e,(function(e){return a.hasOwnProperty(e[0]+"")||(a[e[0]+""]=-1),e[2]})),n=[];o.buckets.each((function(e,t){n.push({name:t,dataList:e})}));for(var r=n.length,i=0;i<r;++i){for(var l=n[i].name,s=0;s<n[i].dataList.length;++s){var d=n[i].dataList[s][0]+"";a[d]=i}for(var d in a)a.hasOwnProperty(d)&&a[d]!==i&&(a[d]=i,e[t]=[d,0,l],t++)}return e},t.prototype.getInitialData=function(e,t){for(var a=this.getReferringComponents("singleAxis",m.b).models[0].get("type"),o=u.filter(e.data,(function(e){return void 0!==e[2]})),n=this.fixData(o||[]),r=[],i=this.nameMap=u.createHashMap(),l=0,s=0;s<n.length;++s)r.push(n[s][2]),i.get(n[s][2])||(i.set(n[s][2],l),l++);var d=Object(y.b)(n,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:Object(f.a)(a)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,c=new v.a(d,this);return c.initData(n),c},t.prototype.getLayerSeries=function(){for(var e=this.getData(),t=e.count(),a=[],o=0;o<t;++o)a[o]=o;var n=e.mapDimension("single"),r=Object(m.j)(a,(function(t){return e.get("name",t)})),i=[];return r.buckets.each((function(t,a){t.sort((function(t,a){return e.get(n,t)-e.get(n,a)})),i.push({name:a,indices:t})})),i},t.prototype.getAxisTooltipData=function(e,t,a){u.isArray(e)||(e=e?[e]:[]);for(var o,n=this.getData(),r=this.getLayerSeries(),i=[],l=r.length,s=0;s<l;++s){for(var d=Number.MAX_VALUE,c=-1,h=r[s].indices.length,p=0;p<h;++p){var g=n.get(e[0],r[s].indices[p]),y=Math.abs(g-t);y<=d&&(o=g,d=y,c=r[s].indices[p])}i.push(c)}return{dataIndices:i,nestestValue:o}},t.prototype.formatTooltip=function(e,t,a){var o=this.getData(),n=o.getName(e),r=o.get(o.mapDimension("value"),e);return Object(x.c)("nameValue",{name:n,value:r})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={zlevel:0,z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}(g.b),I=w,L=a(9);function _(e,t){e.eachSeriesByType("themeRiver",(function(e){var t=e.getData(),a=e.coordinateSystem,o={},n=a.getRect();o.rect=n;var r=e.get("boundaryGap"),i=a.getAxis();(o.boundaryGap=r,"horizontal"===i.orient)?(r[0]=L.p(r[0],n.height),r[1]=L.p(r[1],n.height),M(t,e,n.height-r[0]-r[1])):(r[0]=L.p(r[0],n.width),r[1]=L.p(r[1],n.width),M(t,e,n.width-r[0]-r[1]));t.setLayout("layoutInfo",o)}))}function M(e,t,a){if(e.count())for(var o,n=t.coordinateSystem,r=t.getLayerSeries(),i=e.mapDimension("single"),l=e.mapDimension("value"),s=u.map(r,(function(t){return u.map(t.indices,(function(t){var a=n.dataToPoint(e.get(i,t));return a[1]=e.get(l,t),a}))})),d=function(e){for(var t=e.length,a=e[0].length,o=[],n=[],r=0,i=0;i<a;++i){for(var l=0,s=0;s<t;++s)l+=e[s][i][1];l>r&&(r=l),o.push(l)}for(var d=0;d<a;++d)n[d]=(r-o[d])/2;r=0;for(var u=0;u<a;++u){var c=o[u]+n[u];c>r&&(r=c)}return{y0:n,max:r}}(s),c=d.y0,h=a/d.max,p=r.length,g=r[0].indices.length,y=0;y<g;++y){o=c[y]*h,e.setItemLayout(r[0].indices[y],{layerIndex:0,x:s[0][y][0],y0:o,y:s[0][y][1]*h});for(var f=1;f<p;++f)o+=s[f-1][y][1]*h,e.setItemLayout(r[f].indices[y],{layerIndex:f,x:s[f][y][0],y0:o,y:s[f][y][1]*h})}}var N=a(274);function O(e){e.registerChartView(p),e.registerSeriesModel(I),e.registerLayout(_),e.registerProcessor(Object(N.a)("themeRiver"))}},1731:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var o=a(51),n=a(8),r=a(142),i=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a.hasSymbolVisual=!0,a}return Object(n.b)(t,e),t.prototype.getInitialData=function(e,t){return Object(r.a)(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var e=this.option.progressive;return null==e?this.option.large?5e3:this.get("progressive"):e},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?1e4:this.get("progressiveThreshold"):e},t.prototype.brushSelector=function(e,t,a){return a.point(t.getItemLayout(e))},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(a(62).b),l=i,s=a(271),d=a(965),u=a(272),c=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a}return Object(n.b)(t,e),t.prototype.render=function(e,t,a){var o=e.getData();this._updateSymbolDraw(o,e).updateData(o,{clipShape:this._getClipShape(e)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(e,t,a){var o=e.getData();this._updateSymbolDraw(o,e).incrementalPrepareUpdate(o),this._finished=!1},t.prototype.incrementalRender=function(e,t,a){this._symbolDraw.incrementalUpdate(e,t.getData(),{clipShape:this._getClipShape(t)}),this._finished=e.end===t.getData().count()},t.prototype.updateTransform=function(e,t,a){var o=e.getData();if(this.group.dirty(),!this._finished||o.count()>1e4||!this._symbolDraw.isPersistent())return{update:!0};var n=Object(u.a)("").reset(e,t,a);n.progress&&n.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},t.prototype._getClipShape=function(e){var t=e.coordinateSystem,a=t&&t.getArea&&t.getArea();return e.get("clip",!0)?a:null},t.prototype._updateSymbolDraw=function(e,t){var a=this._symbolDraw,o=t.pipelineContext.large;return a&&o===this._isLargeDraw||(a&&a.remove(),a=this._symbolDraw=o?new d.a:new s.a,this._isLargeDraw=o,this.group.removeAll()),this.group.add(a.group),a},t.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(a(61).a),h=c,p=a(629);function g(e){Object(o.a)(p.a),e.registerSeriesModel(l),e.registerChartView(h),e.registerLayout(Object(u.a)("scatter"))}}}]);